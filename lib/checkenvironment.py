#!/usr/bin/env python
# -*- coding: utf-8 -*-

import commands, subprocess, sys

def checkEnvironment():
    adbret = commands.getoutput("which adb")
    if adbret.find("adb") == -1:
        print "Error: please add adb to your system environment!"
        sys.exit()

    BuildType = commands.getoutput("adb shell getprop ro.build.type")
    if BuildType.find("userdebug") != -1 or BuildType.find("eng") != -1:
        print "Error: CTS test should be performed on user build only!"
        sys.exit()

    return subprocess.Popen("adb shell getprop ro.build.version.release".split(), shell=False, stdout=subprocess.PIPE).stdout.readline().strip()
